<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shortlinks</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="//unpkg.com/alpinejs" defer></script>
    <style>
        [x-cloak] {
            display: none;
        }
    </style>
</head>

<body class="bg-stone-50 dark:bg-stone-900 py-5 dark:text-white flex flex-col px-5 lg:px-0" x-data x-cloak>

    <div class="flex items-center justify-between container mx-auto lg:max-w-screen-lg mb-8">
        <a href="#" class="flex items-center text-2xl font-semibold text-stone-900 dark:text-white ">
            <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="fill-teal-500 me-1">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.714 22 12C22 7.28595 22 4.92893 20.5355 3.46447C19.0711 2 16.714 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355ZM9.5 8.75C7.70507 8.75 6.25 10.2051 6.25 12C6.25 13.7949 7.70507 15.25 9.5 15.25C11.2949 15.25 12.75 13.7949 12.75 12C12.75 11.5858 13.0858 11.25 13.5 11.25C13.9142 11.25 14.25 11.5858 14.25 12C14.25 14.6234 12.1234 16.75 9.5 16.75C6.87665 16.75 4.75 14.6234 4.75 12C4.75 9.37665 6.87665 7.25 9.5 7.25C9.91421 7.25 10.25 7.58579 10.25 8C10.25 8.41421 9.91421 8.75 9.5 8.75ZM17.75 12C17.75 13.7949 16.2949 15.25 14.5 15.25C14.0858 15.25 13.75 15.5858 13.75 16C13.75 16.4142 14.0858 16.75 14.5 16.75C17.1234 16.75 19.25 14.6234 19.25 12C19.25 9.37665 17.1234 7.25 14.5 7.25C11.8766 7.25 9.75 9.37665 9.75 12C9.75 12.4142 10.0858 12.75 10.5 12.75C10.9142 12.75 11.25 12.4142 11.25 12C11.25 10.2051 12.7051 8.75 14.5 8.75C16.2949 8.75 17.75 10.2051 17.75 12Z" />
            </svg>
            Shtnr
        </a>
        <div>
            <a href="/logout">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6a2.25 2.25 0 0 1 2.25 2.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0-3-3m0 0 3-3m-3 3H15" />
                </svg>

            </a>
        </div>
    </div>

    <div class="container mx-auto max-w-screen-xl flex flex-col lg:flex-row gap-5">

        <aside class="w-full lg:w-[320px]">
            <div class="bg-stone-800 p-5 rounded-md">


                <form action="/shorten" method="post" class="space-y-4">
                    <div class="max-w-sm space-y-3">
                        <div class="relative">
                            <input type="text" name="shortURL" class="peer py-3 pe-0 ps-8 block w-full bg-transparent border-t-transparent border-b-2 border-x-transparent border-b-stone-200 text-sm focus:border-t-transparent focus:border-x-transparent focus:border-b-teal-500 focus:ring-0 disabled:opacity-50 disabled:pointer-events-none dark:border-b-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600 dark:focus:border-b-neutral-600" placeholder="Shortlink">
                            <div class="absolute inset-y-0 start-0 flex items-center pointer-events-none ps-2 peer-disabled:opacity-50 peer-disabled:pointer-events-none">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5" />
                                </svg>

                            </div>
                        </div>

                        <div class="relative">
                            <input type="url" name="url" class="peer py-3 pe-0 ps-8 block w-full bg-transparent border-t-transparent border-b-2 border-x-transparent border-b-stone-200 text-sm focus:border-t-transparent focus:border-x-transparent focus:border-b-teal-500 focus:ring-0 disabled:opacity-50 disabled:pointer-events-none dark:border-b-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600 dark:focus:border-b-neutral-600" placeholder="Expanded URL" required>
                            <div class="absolute inset-y-0 start-0 flex items-center pointer-events-none ps-2 peer-disabled:opacity-50 peer-disabled:pointer-events-none">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244" />
                                </svg>

                            </div>
                        </div>
                    </div>

                    <button type="submit" class="py-1.5 px-3 inline-flex items-center gap-x-2 text-sm rounded-lg border border-transparent bg-teal-600 text-white hover:bg-teal-700 disabled:opacity-50 disabled:pointer-events-none">
                        Add Shortlink
                    </button>
            </div>

            </form>
        </aside>

        <div class="flex flex-col w-auto flex-grow">
            <div class="-m-1.5 overflow-x-auto">
                <div class="p-1.5 min-w-full inline-block align-middle">
                    <div class="overflow-hidden">
                        <table class="min-w-full divide-y divide-stone-200 dark:divide-neutral-700">
                            <thead>
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-stone-500 uppercase dark:text-neutral-500">ShortCode</th>
                                    <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-stone-500 uppercase dark:text-neutral-500">URL</th>
                                    <th scope="col" class="px-6 py-3 text-end text-xs font-medium text-stone-500 uppercase dark:text-neutral-500">Clicked</th>
                                    <th scope="col" class="px-6 py-3 text-end text-xs font-medium text-stone-500 uppercase dark:text-neutral-500">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-stone-200 dark:divide-stone-700">
                                {{ $SiteUrl := .SiteUrl }}
                                {{range .Links}}
                                <tr class="hover:bg-stone-100 dark:hover:bg-stone-800">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-stone-800 dark:text-neutral-200 min-w-[150px]">
                                        <div class="flex items-center">
                                            <a href="{{$SiteUrl}}/{{.ShortCode}}" target="_blank">{{.ShortCode}}</a>
                                            <div x-data="{
                                                    copyText: '{{$SiteUrl}}/{{.ShortCode}}',
                                                    copyNotification: false,
                                                    copyToClipboard() {
                                                        navigator.clipboard.writeText(this.copyText);
                                                        this.copyNotification = true;
                                                        let that = this;
                                                        setTimeout(function(){
                                                            that.copyNotification = false;
                                                        }, 1500);
                                                    }
                                                }" class="relative z-20 flex items-center ms-auto">
                                                <div x-show="copyNotification" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 translate-x-2" x-transition:enter-end="opacity-100 translate-x-0" x-transition:leave="transition ease-in duration-300" x-transition:leave-start="opacity-100 translate-x-0" x-transition:leave-end="opacity-0 translate-x-2" class="absolute left-0" x-cloak>
                                                    <div class="px-3 h-7 -ml-1.5 items-center flex text-xs bg-teal-500 border-r border-teal-500 -translate-x-full text-white rounded">
                                                        <span>Copied!</span>
                                                        <div class="absolute right-0 inline-block h-full -mt-px overflow-hidden translate-x-3 -translate-y-2 top-1/2">
                                                            <div class="w-3 h-3 origin-top-left transform rotate-45 bg-teal-500 border border-transparent"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <button @click="copyToClipboard();" class="flex items-center justify-center cursor-pointer  hover:text-white  text-neutral-400 group">
                                                    <svg x-show="copyNotification" class="w-4 h-4 text-teal-500 stroke-current" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" x-cloak>
                                                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                                                    </svg>
                                                    <svg x-show="!copyNotification" class="w-4 h-4 stroke-current" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                        <g fill="none" stroke="none">
                                                            <path d="M7.75 7.757V6.75a3 3 0 0 1 3-3h6.5a3 3 0 0 1 3 3v6.5a3 3 0 0 1-3 3h-.992" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                                            <path d="M3.75 10.75a3 3 0 0 1 3-3h6.5a3 3 0 0 1 3 3v6.5a3 3 0 0 1-3 3h-6.5a3 3 0 0 1-3-3v-6.5z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                                        </g>
                                                    </svg>
                                                </button>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-stone-800 dark:text-neutral-200 max-w-[250px] overflow-x-scroll">
                                        <a href="{{.LongLink}}" target="_blank">{{.LongLink}}</a>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-stone-800 dark:text-neutral-200 w-[80px] text-right">{{.TimesAccessed}}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-end text-sm font-medium">
                                        <form action="/{{.ShortCode}}/delete" method="post">
                                            <button type="submit" class="hover:text-pink-500  text-neutral-400">
                                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4">
                                                    <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                                                </svg>

                                            </button>
                                        </form>
                                    </td>
                                </tr>
                                {{else}}
                                <tr class="">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-stone-800 dark:text-neutral-200 text-center" colspan="5">No shortlinks found.</td>
                                </tr>
                                {{end}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>

</html>